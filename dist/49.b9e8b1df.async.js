webpackJsonp([49],{1350:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.saveAuthories=t.userForRole=t.queryUsersByRole=t.authrizeForRole=t.queryAuthories=t.queryRoleDetail=t.deleteRole=t.editRole=t.addRole=t.queryRoles=t.userControl=t.userDataSourceSync=t.queryUsers=void 0;var a=r(211),u=n(a),o=r(8),s=n(o),c=r(368),i=n(c),f=(t.queryUsers=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/user/search",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.userDataSourceSync=function(){var e=(0,i.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/user/sync",{method:"POST",body:{sync:!0}}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.userControl=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/user/setstatus",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryRoles=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/role/search",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.addRole=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/role/add",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.editRole=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/role/edit",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deleteRole=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/role/delete",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryRoleDetail=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/role/roleinfo",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryAuthories=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/role/role/permissionlist",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.authrizeForRole=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/role/authoredit",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryUsersByRole=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/role/userinfos",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.userForRole=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/account/role/usersedit",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.saveAuthories=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/role/role/permissionedit",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r(376),r(375)),l=n(f)},864:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(369),u=n(a),o=r(211),s=n(o),c=r(8),i=n(c);r(370);var f=r(1),l=(n(f),r(371)),d=r(1350),p=r(344),h=function(e){return e.value};t.default={namespace:"user-manage",state:{listInfo:{list:[],pagination:{current:1,pageSize:20,total:0},isLoading:!1},searchFormFields:{department_id:{value:void 0},username:{value:void 0}},syncing:!1,orgTreeData:[],operateAuthor:{}},effects:{fetchList:s.default.mark(function e(t,r){var n,a,u,o=t.payload,c=r.call,f=r.put,l=r.select;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(function(e){return e["user-manage"]});case 2:return n=e.sent,a=(0,p.objKeyWrapper)(n.searchFormFields,h),e.next=6,f({type:"changeLoading",payload:!0});case 6:return e.next=8,c(d.queryUsers,(0,i.default)({},a,o));case 8:if(u=e.sent,200!==u.code){e.next=12;break}return e.next=12,f({type:"saveList",payload:u.data});case 12:return e.next=14,f({type:"changeLoading",payload:!1});case 14:case"end":return e.stop()}},e,this)}),sync:s.default.mark(function e(t,r){var n,a,o,c=t.payload,f=r.call,l=r.put,y=r.select;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({type:"changeSyncing",payload:!0});case 2:return e.next=4,f(d.userDataSourceSync,c);case 4:if(n=e.sent,200!==n.code){e.next=15;break}return e.next=8,l({type:"changeSyncing",payload:!1});case 8:return u.default.success(n.msg),e.next=11,y(function(e){return e["user-manage"]});case 11:return a=e.sent,o=(0,p.objKeyWrapper)(a.searchFormFields,h),e.next=15,l({type:"fetchList",payload:(0,i.default)({},o,{page:a.listInfo.pagination.current,page_size:a.listInfo.pagination.pageSize})});case 15:case"end":return e.stop()}},e,this)}),userControl:s.default.mark(function e(t,r){var n,a,o,c=t.payload,f=r.call,l=r.put,y=r.select;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(d.userControl,c);case 2:if(n=e.sent,200!==n.code){e.next=11;break}return e.next=6,y(function(e){return e["user-manage"]});case 6:return a=e.sent,o=(0,p.objKeyWrapper)(a.searchFormFields,h),u.default.success(n.msg),e.next=11,l({type:"fetchList",payload:(0,i.default)({},o,{page:a.listInfo.current,page_size:a.listInfo.pageSize})});case 11:case"end":return e.stop()}},e,this)}),fetchOrgTreeData:s.default.mark(function e(t,r){var n,a=t.payload,u=r.call,o=r.put;r.select;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(l.loadCategoryTree,a);case 2:if(n=e.sent,200!==n.code){e.next=6;break}return e.next=6,o({type:"saveOrgTreeData",payload:n.data});case 6:case"end":return e.stop()}},e,this)})},reducers:{saveList:function(e,t){var r=t.payload;return(0,i.default)({},e,{listInfo:(0,i.default)({},e.listInfo,{list:r.msgdata},{pagination:{current:r.current_page,total:r.total,pageSize:r.page_size}}),operateAuthor:r.permissions})},changeLoading:function(e,t){var r=t.payload;return(0,i.default)({},e,{listInfo:(0,i.default)({},e.listInfo,{isLoading:r})})},changeSyncing:function(e,t){var r=t.payload;return(0,i.default)({},e,{syncing:r})},formFieldChange:function(e,t){var r=t.payload;return(0,i.default)({},e,{searchFormFields:(0,i.default)({},e.searchFormFields,r)})},saveOrgTreeData:function(e,t){var r=t.payload;return(0,i.default)({},e,{orgTreeData:r})}}},e.exports=t.default}});