webpackJsonp([58],{1312:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.virtualException=t.rejectVirtual=t.editVirtual=t.addVirtual=t.regressVirtual=t.offlineVirtual=t.allotVirtual=t.fetchPhysical=t.virtualDetail=t.fetchVirtualList=t.save=t.fetchTemplateList=t.physicalException=t.physicalInitial=t.physicalRegress=t.physicalOffline=t.physicalRepair=t.physicalEdit=t.allotPhysicalService=t.allotPhysical=t.physicaldetail=t.add=t.update=t.upload=t.downLoad=t.fetchDictionary=t.fetchCommonFormList=void 0;var n=a(211),u=r(n),o=a(8),i=r(o),c=a(368),l=r(c),d=(t.fetchCommonFormList=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/list",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchDictionary=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/basicdic",{method:"GET"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.downLoad=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/datadownload?file_type=0",{method:"GET"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.upload=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/servers/upload",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/update",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.add=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/add",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.physicaldetail=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/detail",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.allotPhysical=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/assiginresourcepool",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.allotPhysicalService=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/assiginserver",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.physicalEdit=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/edit",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.physicalRepair=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/rejectrepair",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.physicalOffline=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/offline",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.physicalRegress=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/regress",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.physicalInitial=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/init",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.physicalException=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/exception",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchTemplateList=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/account/user/dictionarys",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.save=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/account/user/data_dictionary",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchVirtualList=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/list",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.virtualDetail=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/detail",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchPhysical=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/physicals",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.allotVirtual=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/assiginserver",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.offlineVirtual=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/offline",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.regressVirtual=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/regress",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.addVirtual=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/add",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.editVirtual=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/edit",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.rejectVirtual=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/reject",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.virtualException=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cmdb/invent/exception",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a(375)),s=r(d)},852:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(378),u=r(n),o=a(54),i=r(o),c=a(354),l=r(c),d=a(369),s=r(d),f=a(211),p=r(f),m=a(8),h=r(m);a(370);var v=a(1312),y=a(344),b=a(377),x=(r(b),function(e){return e.value});t.default={namespace:"virtualManage",state:{commonSearchForm:{search_text:{value:void 0},rejecttime:{value:void 0}},commonlistInfo:{list:[],pagination:{current:1,pageSize:20,total:0},isLoading:!1},modalStatus:!1,commonModalStatus:!1,infoModalStatus:!1,regressModalStatus:!1,commonLoading:!1,dataDictionary:{},selectedRowKeys:[0],relevancePhysical:[],relevancePhysicalId:void 0,fetchingLoading:!1,virtualInfo:{},errorModalStatus:{show:!1,loading:!1},errorInfo:{exceptiontime:"",exceptioncontent:""},commonFormFields:{id:{value:void 0},config:{value:"1"},serverip:{value:void 0},os_id:{value:void 0},loginuser:{value:"root"},servername:{value:void 0},loginpassword:{value:void 0},loginpasswordconfirm:{value:void 0},description:{value:void 0},serversn:{value:void 0},configName:{value:void 0},physical:{value:[]},regress:{value:void 0}},operateAuthor:{}},effects:{fetchCommonList:p.default.mark(function e(t,a){var r,n=t.payload,u=a.call,o=a.put;a.select;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeCommonTableLoading",payload:!0});case 2:return e.next=4,u(v.fetchVirtualList,(0,h.default)({},n));case 4:if(r=e.sent,200!=r.code){e.next=8;break}return e.next=8,o({type:"saveCommonTableList",payload:r.data});case 8:return e.next=10,o({type:"changeCommonTableLoading",payload:!1});case 10:case"end":return e.stop()}},e,this)}),fetchDataDictionary:p.default.mark(function e(t,a){var r,n=(t.payload,a.call),u=a.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(v.fetchDictionary);case 2:if(r=e.sent,200!=r.code){e.next=6;break}return e.next=6,u({type:"saveDataDictionary",payload:r.data});case 6:case"end":return e.stop()}},e,this)}),changeModalStatus:p.default.mark(function e(t,a){var r=t.payload,n=t.callback,u=(a.call,a.put);return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"saveModalStatus",payload:r});case 2:n&&n();case 3:case"end":return e.stop()}},e,this)}),queryPhysicalDetail:p.default.mark(function e(t,a){var r,n,u=t.payload,o=a.call,i=a.put;a.select;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,i({type:"saveCommonLoading",payload:!0});case 3:return e.next=5,o(v.virtualDetail,(0,h.default)({},u));case 5:if(n=e.sent,200!=n.code){e.next=25;break}return e.next=9,i({type:"saveCommonFormFields",payload:n.data});case 9:e.t0=n.data.config.id,e.next="1"===e.t0?12:"2"===e.t0?14:"3"===e.t0?16:"4"===e.t0?18:20;break;case 12:return r=[0],e.abrupt("break",21);case 14:return r=[1],e.abrupt("break",21);case 16:return r=[2],e.abrupt("break",21);case 18:return r=[3],e.abrupt("break",21);case 20:return e.abrupt("break",21);case 21:return e.next=23,i({type:"changeSelectedRowKey",payload:r});case 23:return e.next=25,i({type:"changeRelevancePhysicalId",payload:n.data.hostinfo.hostid});case 25:return e.next=27,i({type:"saveCommonLoading",payload:!1});case 27:case"end":return e.stop()}},e,this)}),fetchPhysical:p.default.mark(function e(t,a){var r,n,u=t.payload,o=a.call,i=a.put;a.select;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({type:"changeFetchingLoading",payload:!0});case 2:return e.next=4,o(v.fetchPhysical,(0,h.default)({},u));case 4:if(r=e.sent,200!=r.code){e.next=9;break}return n=r.data.msgdata.map(function(e){return{text:e.serverip+"/"+e.servername+"/"+e.serversn,value:e.serverip+"/"+e.servername+"/"+e.serversn,id:e.id}}),e.next=9,i({type:"changeRelevancePhysical",payload:n});case 9:return e.next=11,i({type:"changeFetchingLoading",payload:!1});case 11:case"end":return e.stop()}},e,this)}),operateService:p.default.mark(function e(t,a){var r,n,u,o,i,c=t.payload,l=t.env,d=t.url,f=a.call,m=a.put,b=a.select;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={allotVirtual:v.allotVirtual,offlineVirtual:v.offlineVirtual,regressVirtual:v.regressVirtual,rejectVirtual:v.rejectVirtual},n={allotVirtual:"\u5206\u914d\u6210\u529f",offlineVirtual:"\u4e0b\u7ebf\u6210\u529f",regressVirtual:"\u91cd\u65b0\u4e0a\u7ebf\u6210\u529f",rejectVirtual:"\u9500\u6bc1\u6210\u529f"},e.next=4,b(function(e){return e.virtualManage});case 4:return u=e.sent,o=(0,y.objKeyWrapper)(u.commonSearchForm,x),e.next=8,m({type:"saveCommonLoading",payload:!0});case 8:return e.next=10,f(r[""+d],(0,h.default)({},c));case 10:if(i=e.sent,200!=i.code){e.next=21;break}return s.default.success(n[""+d]),e.next=15,m({type:"fetchCommonList",payload:(0,h.default)({},o,{current_page:u.commonlistInfo.pagination.current,page_size:u.commonlistInfo.pagination.pageSize,env:l})});case 15:return e.next=17,m({type:"saveCommonModalStatus",payload:!1});case 17:return e.next=19,m({type:"saveRegressModalStatus",payload:!1});case 19:return e.next=21,m({type:"initialCommonFormFields"});case 21:return e.next=23,m({type:"saveCommonLoading",payload:!1});case 23:case"end":return e.stop()}},e,this)}),addEditSubmit:p.default.mark(function e(t,a){var r,n,u,o,i=t.payload,c=t.clickType,l=t.callback,d=t.env,f=a.call,m=a.put,b=a.select;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(function(e){return e.virtualManage});case 2:return r=e.sent,n=(0,y.objKeyWrapper)(r.commonSearchForm,x),u="",o="",e.next=8,m({type:"saveCommonLoading",payload:!0});case 8:if("add"!=c){e.next=15;break}return e.next=11,f(v.addVirtual,(0,h.default)({},i));case 11:u=e.sent,o="\u65b0\u589e\u6210\u529f",e.next=19;break;case 15:return e.next=17,f(v.editVirtual,(0,h.default)({},i));case 17:u=e.sent,o="\u7f16\u8f91\u6210\u529f";case 19:if(200!=u.code){e.next=27;break}return s.default.success(o),e.next=23,m({type:"fetchCommonList",payload:(0,h.default)({},n,{current_page:"add"==c?1:r.commonlistInfo.pagination.current,page_size:r.commonlistInfo.pagination.pageSize,env:d})});case 23:return e.next=25,m({type:"changeModalStatus",payload:!1,callback:l||void 0});case 25:return e.next=27,m({type:"initialCommonFormFields"});case 27:return e.next=29,m({type:"saveCommonLoading",payload:!1});case 29:case"end":return e.stop()}},e,this)}),changeErrorInfo:p.default.mark(function e(t,a){var r,n=t.payload,u=a.call,o=a.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"saveErrorModalStatus",payload:{show:!0,loading:!0}});case 2:return e.next=4,u(v.virtualException,(0,h.default)({},n));case 4:if(r=e.sent,200!=r.code){e.next=8;break}return e.next=8,o({type:"saveErrorInfo",payload:r.data});case 8:return e.next=10,o({type:"saveErrorModalStatus",payload:{show:!0,loading:!1}});case 10:case"end":return e.stop()}},e,this)}),showInfoModal:p.default.mark(function e(t,a){var r,n=t.payload,u=a.call,o=a.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"saveCommonLoading",payload:!0});case 2:return e.next=4,u(v.virtualDetail,(0,h.default)({},n));case 4:if(r=e.sent,200!=r.code){e.next=8;break}return e.next=8,o({type:"saveVirtualInfo",payload:r.data});case 8:return e.next=10,o({type:"saveCommonLoading",payload:!1});case 10:case"end":return e.stop()}},e,this)})},reducers:{commonFormFieldChange:function(e,t){return(0,h.default)({},e,{commonSearchForm:(0,h.default)({},e.commonSearchForm,t.payload)})},saveDataDictionary:function(e,t){return(0,h.default)({},e,{dataDictionary:(0,h.default)({},e.dataDictionary,t.payload)})},saveCommonTableList:function(e,t){return(0,h.default)({},e,{commonlistInfo:(0,h.default)({},e.commonlistInfo,{list:t.payload.msgdata},{pagination:{current:t.payload.current_page,pageSize:t.payload.page_size,total:t.payload.total}}),operateAuthor:t.payload.permissions})},changeCommonTableLoading:function(e,t){return(0,h.default)({},e,{commonlistInfo:(0,h.default)({},e.commonlistInfo,{isLoading:t.payload})})},saveModalStatus:function(e,t){return(0,h.default)({},e,{modalStatus:t.payload})},modalFormFieldChange:function(e,t){var a=t.payload;return(0,h.default)({},e,{commonFormFields:(0,h.default)({},e.commonFormFields,a)})},initialCommonFormFields:function(e,t){return(0,h.default)({},e,{commonFormFields:{id:{value:void 0},config:{value:"1"},serverip:{value:void 0},os_id:{value:void 0},loginuser:{value:"root"},servername:{value:void 0},loginpassword:{value:void 0},loginpasswordconfirm:{value:void 0},description:{value:void 0},serversn:{value:void 0},configName:{value:void 0},physical:{value:[]},regress:{value:void 0}}})},changeSelectedRowKey:function(e,t){return(0,h.default)({},e,{selectedRowKeys:t.payload})},saveCommonLoading:function(e,t){return(0,h.default)({},e,{commonLoading:t.payload})},saveCommonFormFields:function(e,t){var a=t.payload,r={},n={physical:{value:[a.hostinfo.hostip+"/"+a.hostinfo.hostname+"/"+a.hostinfo.hostsn]}};return(0,l.default)(a).forEach(function(t,o){e.commonFormFields.hasOwnProperty(t)&&(r=(0,i.default)({},""+t,{value:a[""+t]}),"config"==t&&(r={config:{value:a[""+t].id},configName:{value:a[""+t].name}}),(0,u.default)(e.commonFormFields,r,n))}),(0,h.default)({},e,{commonFormFields:(0,h.default)({},e.commonFormFields)})},saveCommonModalStatus:function(e,t){return(0,h.default)({},e,{commonModalStatus:t.payload})},changeRelevancePhysical:function(e,t){return(0,h.default)({},e,{relevancePhysical:t.payload})},changeRelevancePhysicalId:function(e,t){return(0,h.default)({},e,{relevancePhysicalId:t.payload})},changeFetchingLoading:function(e,t){return(0,h.default)({},e,{fetchingLoading:t.payload})},saveErrorInfo:function(e,t){return(0,h.default)({},e,{errorInfo:(0,h.default)({},e.errorInfo,{exceptiontime:t.payload.exceptiontime,exceptioncontent:t.payload.exceptioncontent})})},saveErrorModalStatus:function(e,t){return(0,h.default)({},e,{errorModalStatus:t.payload})},saveInfoModalStatus:function(e,t){return(0,h.default)({},e,{infoModalStatus:t.payload})},saveVirtualInfo:function(e,t){return(0,h.default)({},e,{virtualInfo:t.payload})},saveRegressModalStatus:function(e,t){return(0,h.default)({},e,{regressModalStatus:t.payload})}}},e.exports=t.default}});