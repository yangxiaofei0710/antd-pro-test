webpackJsonp([55],{1349:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.redeploy=t.envInfo=t.deployService=t.fetchService=t.editMiddlewares=t.addMiddlewares=t.selectEnv=t.queryexpressList=t.deleteEnv=t.editEnv=t.addEnv=t.queryEnvInfo=t.queryEnvList=void 0;var r=a(211),d=n(r),u=a(8),o=n(u),i=a(368),s=n(i),l=(t.queryEnvList=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/env/search",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryEnvInfo=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/env/info",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.addEnv=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/env/add",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.editEnv=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/env/edit",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deleteEnv=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/env/delete",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryexpressList=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/dep/list",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.selectEnv=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/dep/envs",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.addMiddlewares=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/dep/add",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.editMiddlewares=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/dep/edit",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchService=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/dep/servers",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deployService=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/dep/deploy",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.envInfo=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/dep/info",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.redeploy=function(){var e=(0,s.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/middlewares/dep/redeploy",{method:"POST",body:(0,o.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a(376),a(375)),c=n(l)},857:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(369),d=n(r),u=a(211),o=n(u),i=a(8),s=n(i);a(370);var l=a(1349),c=a(344),f=function(e){return e.value};t.default={namespace:"expressList",state:{listInfo:{list:[],pagination:{current:1,pageSize:20,total:0},isLoading:!1},searchFormFields:{search_text:{value:void 0}},addModalStatus:!1,deployModalStatus:!1,infoModalStatus:!1,expressInfo:{},commonLoading:!1,addFormFields:{middleware_name:{value:void 0},type_id:{value:void 0},comment:{value:void 0}},envTypeList:[],deployEnvFromFields:{middleware_name:{value:void 0},type_name:{value:void 0},serverid_list:{value:void 0},environ_id:{value:void 0},iscolony:{value:!1},middleware_id:{value:void 0}},chanceServiceList:[],fetchingLoading:!1,operateAuthor:{}},effects:{fetchList:o.default.mark(function e(t,a){var n,r,d,u=t.payload,i=a.call,p=a.put,v=a.select;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({type:"changeLoading",payload:!0});case 2:return e.next=4,v(function(e){return e.expressList});case 4:return n=e.sent,r=(0,c.objKeyWrapper)(n.searchFormFields,f),e.next=8,i(l.queryexpressList,(0,s.default)({},r,u));case 8:if(d=e.sent,200!=d.code){e.next=12;break}return e.next=12,p({type:"saveExpressList",payload:d.data});case 12:return e.next=14,p({type:"changeLoading",payload:!1});case 14:case"end":return e.stop()}},e,this)}),fetchEnvList:o.default.mark(function e(t,a){var n,r=(t.payload,a.call),d=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(l.selectEnv);case 2:if(n=e.sent,200!=n.code){e.next=6;break}return e.next=6,d({type:"saveEnvTypeList",payload:n.data.msgdata});case 6:case"end":return e.stop()}},e,this)}),addMiddlewares:o.default.mark(function e(t,a){var n,r,u,i=t.payload,p=t.clickType,v=a.call,y=a.put,h=a.select;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({type:"changeCommonLoading",payload:!0});case 2:return e.next=4,h(function(e){return e.expressList});case 4:if(n=e.sent,r=(0,c.objKeyWrapper)(n.addFormFields,f),u=null,"add"!=p){e.next=13;break}return e.next=10,v(l.addMiddlewares,(0,s.default)({},r));case 10:u=e.sent,e.next=16;break;case 13:return e.next=15,v(l.editMiddlewares,(0,s.default)({},i));case 15:u=e.sent;case 16:if(200!=u.code){e.next=24;break}return d.default.success("\u65b0\u589e\u6210\u529f"),e.next=20,y({type:"changeAddModalStatus",payload:!1});case 20:return e.next=22,y({type:"initAddFormFields"});case 22:return e.next=24,y({type:"fetchList",payload:{current_page:1,page_size:20}});case 24:return e.next=26,y({type:"changeCommonLoading",payload:!1});case 26:case"end":return e.stop()}},e,this)}),fetchService:o.default.mark(function e(t,a){var n,r,d=t.payload,u=a.call,i=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({type:"changeFetchingLoading",payload:!0});case 2:return e.next=4,u(l.fetchService,(0,s.default)({},d));case 4:if(n=e.sent,200!=n.code){e.next=9;break}return r=n.data.map(function(e){return{text:e.server_ip,value:e.server_ip,id:e.server_id}}),e.next=9,i({type:"changeServiceList",payload:r});case 9:return e.next=11,i({type:"changeFetchingLoading",payload:!1});case 11:case"end":return e.stop()}},e,this)}),deployEnv:o.default.mark(function e(t,a){var n,r,u,i=(t.payload,a.call),p=a.put,v=a.select;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({type:"changeCommonLoading",payload:!0});case 2:return e.next=4,v(function(e){return e.expressList});case 4:return n=e.sent,r=(0,c.objKeyWrapper)(n.deployEnvFromFields,f),e.next=8,i(l.deployService,(0,s.default)({},r));case 8:if(u=e.sent,200!=u.code){e.next=17;break}return d.default.success("\u90e8\u7f72\u6210\u529f"),e.next=13,p({type:"changeDeployModalStatus",payload:!1});case 13:return e.next=15,p({type:"initdeployEnvFromFields"});case 15:return e.next=17,p({type:"fetchList",payload:{current_page:n.listInfo.pagination.current,page_size:20}});case 17:return e.next=19,p({type:"changeCommonLoading",payload:!1});case 19:case"end":return e.stop()}},e,this)}),fetchEnvInfo:o.default.mark(function e(t,a){var n,r=t.payload,d=a.call,u=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"changeCommonLoading",payload:!0});case 2:return e.next=4,d(l.envInfo,(0,s.default)({},r));case 4:if(n=e.sent,200!=n.code){e.next=8;break}return e.next=8,u({type:"saveExpressInfo",payload:n.data});case 8:return e.next=10,u({type:"changeCommonLoading",payload:!1});case 10:case"end":return e.stop()}},e,this)}),redeploy:o.default.mark(function e(t,a){var n,r=t.payload,d=t.middlewareId,u=a.call,i=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({type:"changeCommonLoading",payload:!0});case 2:return e.next=4,u(l.redeploy,(0,s.default)({},r));case 4:if(n=e.sent,200!=n.code){e.next=8;break}return e.next=8,i({type:"fetchEnvInfo",payload:{middleware_id:d}});case 8:return e.next=10,i({type:"changeCommonLoading",payload:!1});case 10:case"end":return e.stop()}},e,this)})},reducers:{saveExpressList:function(e,t){return(0,s.default)({},e,{listInfo:(0,s.default)({},e.listInfo,{list:t.payload.msgdata},{pagination:{current:t.payload.current_page,total:t.payload.total,pageSize:t.payload.page_size}}),operateAuthor:t.payload.permissions})},changeLoading:function(e,t){return(0,s.default)({},e,{listInfo:(0,s.default)({},e.listInfo,{isLoading:t.payload})})},searchFormFieldsChange:function(e,t){return(0,s.default)({},e,{searchFormFields:(0,s.default)({},e.searchFormFields,t.payload)})},changeAddModalStatus:function(e,t){return(0,s.default)({},e,{addModalStatus:t.payload})},changeDeployModalStatus:function(e,t){return(0,s.default)({},e,{deployModalStatus:t.payload})},changeInfoModalStatus:function(e,t){return(0,s.default)({},e,{infoModalStatus:t.payload})},changeCommonLoading:function(e,t){return(0,s.default)({},e,{commonLoading:t.payload})},saveEnvTypeList:function(e,t){return(0,s.default)({},e,{envTypeList:t.payload})},addFormFieldsChange:function(e,t){return(0,s.default)({},e,{addFormFields:(0,s.default)({},e.addFormFields,t.payload)})},initAddFormFields:function(e,t){return(0,s.default)({},e,{addFormFields:{middleware_name:{value:void 0},type_id:{value:void 0},comment:{value:void 0}}})},initdeployEnvFromFields:function(e,t){return(0,s.default)({},e,{deployEnvFromFields:{middleware_name:{value:void 0},type_name:{value:void 0},serverid_list:{value:void 0},environ_id:{value:void 0},iscolony:{value:!1},middleware_id:{value:void 0}}})},changeFetchingLoading:function(e,t){return(0,s.default)({},e,{fetchingLoading:t.payload})},changeServiceList:function(e,t){return(0,s.default)({},e,{chanceServiceList:t.payload})},deployEnvFromFieldsChange:function(e,t){return(0,s.default)({},e,{deployEnvFromFields:(0,s.default)({},e.deployEnvFromFields,t.payload)})},saveExpressInfo:function(e,t){return(0,s.default)({},e,{expressInfo:t.payload})}}},e.exports=t.default}});