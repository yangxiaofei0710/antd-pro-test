webpackJsonp([56],{1349:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.redeploy=t.envInfo=t.deployService=t.fetchService=t.editMiddlewares=t.addMiddlewares=t.selectEnv=t.queryexpressList=t.deleteEnv=t.editEnv=t.addEnv=t.queryEnvInfo=t.queryEnvList=void 0;var r=a(211),d=n(r),u=a(8),i=n(u),o=a(368),l=n(o),s=(t.queryEnvList=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/env/search",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryEnvInfo=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/env/info",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.addEnv=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/env/add",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.editEnv=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/env/edit",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deleteEnv=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/env/delete",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.queryexpressList=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/dep/list",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.selectEnv=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/dep/envs",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.addMiddlewares=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/dep/add",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.editMiddlewares=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/dep/edit",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchService=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/dep/servers",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.deployService=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/dep/deploy",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.envInfo=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/dep/info",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.redeploy=function(){var e=(0,l.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/middlewares/dep/redeploy",{method:"POST",body:(0,i.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a(376),a(375)),f=n(s)},856:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(369),d=n(r),u=a(211),i=n(u),o=a(8),l=n(o);a(370);var s=a(1349),f=a(344),c=function(e){return e.value};t.default={namespace:"environmentType",state:{listInfo:{list:[],pagination:{current:1,pageSize:20,total:0},isLoading:!1},searchFormFields:{env_key:{value:void 0}},addEditControl:{isShow:!1,loading:!1,clickType:void 0},addEditFormFields:{env_name:{value:void 0},desc:{value:void 0},file_id:{value:void 0}},uploadFileList:[],envModalStatus:{isShow:!1,loading:!1,info:{name:void 0,desc:void 0,file_id:void 0,file_name:void 0,file_url:void 0}},operateAuthor:{}},effects:{fetchList:i.default.mark(function e(t,a){var n,r,d,u=t.payload,o=a.call,p=a.put,v=a.select;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(function(e){return e.environmentType});case 2:return n=e.sent,r=(0,f.objKeyWrapper)(n.searchFormFields,c),e.next=6,p({type:"changeLoading",payload:!0});case 6:return e.next=8,o(s.queryEnvList,(0,l.default)({},r,u));case 8:if(d=e.sent,200!=d.code){e.next=12;break}return e.next=12,p({type:"saveList",payload:d.data});case 12:return e.next=14,p({type:"changeLoading",payload:!1});case 14:case"end":return e.stop()}},e,this)}),addEditControl:i.default.mark(function e(t,a){var n,r=t.payload,d=t.envId,u=a.call,o=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeAddEditControl",payload:r});case 2:if("edit"!=r.clickType||!d){e.next=15;break}return e.next=5,u(s.queryEnvInfo,{env_id:d});case 5:if(n=e.sent,"200"!=n.code){e.next=11;break}return e.next=9,o({type:"setAddEditFormFields",payload:n.data});case 9:return e.next=11,o({type:"saveUploadFileList",payload:{uid:n.data.file_id,name:n.data.file_name,status:"done",url:n.data.file_url}});case 11:return e.next=13,o({type:"changeAddEditControl",payload:{loading:!1}});case 13:e.next=17;break;case 15:return e.next=17,o({type:"defaultUploadFileList"});case 17:case"end":return e.stop()}},e,this)}),handleCancelModal:i.default.mark(function e(t,a){var n=t.payload,r=(a.call,a.put);return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({type:"setAddEditFormFields",payload:{env_name:void 0,desc:void 0,file_id:void 0}});case 2:return e.next=4,r({type:"changeAddEditControl",payload:n});case 4:case"end":return e.stop()}},e,this)}),EnvInfoModla:i.default.mark(function e(t,a){var n,r=t.payload,d=a.call,u=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"changeEnvModalStatus",payload:{isShow:!0,loading:!0}});case 2:return e.next=4,d(s.queryEnvInfo,{env_id:r});case 4:if(n=e.sent,200!=n.code){e.next=8;break}return e.next=8,u({type:"changeEnvModalStatus",payload:{loading:!1,info:{name:n.data.env_name,desc:n.data.desc,file_id:n.data.file_id,file_name:n.data.file_name,file_url:n.data.file_url}}});case 8:case"end":return e.stop()}},e,this)}),deleteEnv:i.default.mark(function e(t,a){var n,r,d=t.payload,u=a.call,o=a.put,l=a.select;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(function(e){return e.environmentType});case 2:return n=e.sent,e.next=5,u(s.deleteEnv,{env_id:d});case 5:if(r=e.sent,200!=r.code){e.next=9;break}return e.next=9,o({type:"fetchList",payload:{current_page:n.listInfo.pagination.current,page_size:20}});case 9:case"end":return e.stop()}},e,this)}),saveAddEditEnv:i.default.mark(function e(t,a){var n,r,u,o=t.payload,p=t.clickType,v=a.call,y=a.put,h=a.select;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({type:"changeAddEditControl",payload:{loading:!0}});case 2:return e.next=4,h(function(e){return e.environmentType});case 4:if(n=e.sent,r=(0,f.objKeyWrapper)(n.searchFormFields,c),u=null,"edit"!=p){e.next=13;break}return e.next=10,v(s.editEnv,(0,l.default)({},o));case 10:u=e.sent,e.next=16;break;case 13:return e.next=15,v(s.addEnv,(0,l.default)({},o));case 15:u=e.sent;case 16:if(200!=u.code){e.next=22;break}return d.default.success(u.msg),e.next=20,y({type:"fetchList",payload:(0,l.default)({},r,{current_page:"edit"==p?1:n.listInfo.pagination.current,page_size:n.listInfo.pagination.pageSize})});case 20:return e.next=22,y({type:"changeAddEditControl",payload:{isShow:!1}});case 22:return e.next=24,y({type:"changeAddEditControl",payload:{loading:!1}});case 24:case"end":return e.stop()}},e,this)})},reducers:{saveList:function(e,t){return(0,l.default)({},e,{listInfo:(0,l.default)({},e.listInfo,{list:t.payload.msgdata},{pagination:{current:t.payload.current_page,total:t.payload.total,pageSize:t.payload.page_size}}),operateAuthor:t.payload.permissions})},changeLoading:function(e,t){return(0,l.default)({},e,{listInfo:(0,l.default)({},e.listInfo,{isLoading:t.payload})})},formFieldChange:function(e,t){var a=t.payload;return(0,l.default)({},e,{searchFormFields:(0,l.default)({},e.searchFormFields,a)})},changeAddEditControl:function(e,t){var a=t.payload;return(0,l.default)({},e,{addEditControl:(0,l.default)({},e.addEditControl,a)})},setAddEditFormFields:function(e,t){var a=t.payload;return(0,l.default)({},e,{addEditFormFields:(0,l.default)({},e.addEditFormFields,{env_name:{value:a.env_name},desc:{value:a.desc},file_id:{value:a.file_id}})})},changeAddEditFormFields:function(e,t){var a=t.payload;return(0,l.default)({},e,{addEditFormFields:(0,l.default)({},e.addEditFormFields,a)})},changeUploadFileList:function(e,t){var a=null,n=null,r=void 0;if(void 0!==t.payload.response){var u=t.payload.response,i=u.code,o=u.msg,s=u.data;a=200==i?"done":"error",n=s?s.file_url:null,r=200==i&&s?s.file_id:void 0,d.default[200==i?"success":"error"](o)}return(0,l.default)({},e,{uploadFileList:[{uid:t.payload.uid,name:t.payload.name,status:a,url:n,fileId:r}]})},saveUploadFileList:function(e,t){return(0,l.default)({},e,{uploadFileList:[{uid:t.payload.uid,name:t.payload.name,status:t.payload.status,url:t.payload.url,fileId:t.payload.uid}]})},defaultUploadFileList:function(e,t){return(0,l.default)({},e,{uploadFileList:[]})},changeEnvModalStatus:function(e,t){return(0,l.default)({},e,{envModalStatus:(0,l.default)({},e.envModalStatus,t.payload)})}}},e.exports=t.default}});