webpackJsonp([57],{1439:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fakeAccountLogout=t.fakeAccountLogin=void 0;var r=a(211),u=n(r),o=a(8),s=n(o),c=a(368),i=n(c),d=(t.fakeAccountLogin=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/account/user/login",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fakeAccountLogout=function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.default)("/account/user/logout",{method:"POST"}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a(375)),f=n(d)},855:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(8),u=n(r),o=a(211),s=n(o),c=a(369),i=n(c);a(370);var d=a(136),f=a(1439),l=a(377),p=n(l);t.default={namespace:"login",state:{status:void 0,submitting:!1,currentUser:{accessToken:"xx",user_name:"xx",profile_photo:"",time_out:100,user_id:11}},effects:{accountSubmit:s.default.mark(function e(t,a){var n,r=t.payload,u=a.call,o=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeSubmitting",payload:!0});case 2:return e.next=4,u(f.fakeAccountLogin,r);case 4:if(n=e.sent,200!==n.code){e.next=19;break}return e.next=8,o({type:"changeLoginStatus",payload:{status:"ok"}});case 8:return e.next=10,o({type:"saveCurrentUser",payload:n.data});case 10:if(p.default.set("accessToken",n.data.accessToken),p.default.set("currentUser",{user_id:n.data.user_id,user_name:n.data.user_name,profile_photo:n.data.profile_photo}),p.default.set("OptCodes",n.data.permissions),!(n.data.permissions.length>0)){e.next=18;break}return e.next=16,o(d.routerRedux.push("/resource-center/public-cloud/cloud-manage"));case 16:e.next=19;break;case 18:i.default.error("\u65e0\u6743\u9650\u8bbf\u95ee");case 19:return e.next=21,o({type:"changeSubmitting",payload:!1});case 21:case"end":return e.stop()}},e,this)}),logout:s.default.mark(function e(t,a){var n,r=a.call,u=a.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(f.fakeAccountLogout);case 2:if(n=e.sent,200!==n.code){e.next=8;break}return e.next=6,u({type:"changeLoginStatus",payload:{status:!1}});case 6:return e.next=8,u(d.routerRedux.push("/user/login"));case 8:case"end":return e.stop()}},e,this)})},reducers:{changeLoginStatus:function(e,t){var a=t.payload;return(0,u.default)({},e,{status:a.status,type:a.type})},changeSubmitting:function(e,t){var a=t.payload;return(0,u.default)({},e,{submitting:a})},saveCurrentUser:function(e,t){var a=t.payload;return(0,u.default)({},e,{currentUser:a})}}},e.exports=t.default}});