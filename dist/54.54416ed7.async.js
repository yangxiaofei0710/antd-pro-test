webpackJsonp([54],{1295:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchOperateInfo=t.fetchOperateList=t.handleSuccess=t.fetchVersionList=t.fetchReleaseTree=t.rollback=t.fetchRollbackList=t.reboot=t.submitRelease=t.fetchReleaseList=t.fetchProjectList=void 0;var a=r(211),u=n(a),o=r(8),s=n(o),c=r(368),f=n(c),i=(t.fetchProjectList=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/project/module/list",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchReleaseList=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/list",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.submitRelease=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/release",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.reboot=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/reboot",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchRollbackList=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/rollbackversionlist",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.rollback=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/rollback",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchReleaseTree=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/projectname/list",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchVersionList=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/version/list",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.handleSuccess=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/marksuccess",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchOperateList=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/version/operates",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchOperateInfo=function(){var e=(0,f.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.default)("/release/version/operateinfo",{method:"POST",body:(0,s.default)({},t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r(375)),l=n(i)},858:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(211),u=n(a),o=r(369),s=n(o),c=r(8),f=n(c);r(370);var i=r(136),l=r(1295);t.default={namespace:"operateManage",state:{envname:"pro",commonLoading:!1,operateInfo:{id:void 0,projectInfo:{},personInfo:{},releaseProgress:{list:[],pagination:{current:1,pageSize:20,total:0},isLoading:!1}}},effects:{handleSuccess:u.default.mark(function e(t,r){var n,a,o,c,i=t.payload,d=r.call,p=r.put,h=r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(l.handleSuccess,(0,f.default)({},i));case 2:if(n=e.sent,200!=n.code){e.next=14;break}return s.default.success(n.msg),e.next=7,h(function(e){return e.common});case 7:return a=e.sent,e.next=10,h(function(e){return e.operateManage});case 10:return o=e.sent,c=a.listInfo,e.next=14,p({type:"common/fetchList",payload:{current_page:c.pagination.current,page_size:20,project_id:a.selectKey,env:o.envname},url:"fetchOperateList"});case 14:case"end":return e.stop()}},e,this)}),fetchOperateInfo:u.default.mark(function e(t,r){var n,a=t.payload,o=r.call,s=r.put;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({type:"changeLoading",payload:!0});case 2:return e.next=4,o(l.fetchOperateInfo,(0,f.default)({},a));case 4:if(n=e.sent,200!=n.code){e.next=10;break}return e.next=8,s({type:"saveOperateInfo",payload:n.data});case 8:return e.next=10,s(i.routerRedux.push("/release-manage/operate-manage/operate-info"));case 10:return e.next=12,s({type:"changeLoading",payload:!1});case 12:case"end":return e.stop()}},e,this)}),sync:u.default.mark(function e(t,r){var n,a,o,s=(t.payload,r.call,r.put),c=r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(function(e){return e.common});case 2:return n=e.sent,e.next=5,c(function(e){return e.operateManage});case 5:return a=e.sent,o=n.listInfo,e.next=9,s({type:"common/fetchList",payload:{current_page:o.pagination.current,page_size:o.pagination.pageSize,project_id:n.selectKey,env:a.envname},url:"fetchOperateList"});case 9:case"end":return e.stop()}},e,this)})},reducers:{saveReleaseInfo:function(e,t){var r=t.payload;return(0,f.default)({},e,{envname:r.envname})},changeCommonLoading:function(e,t){return(0,f.default)({},e,{commonLoading:t.payload})},changeEnv:function(e,t){var r=t.payload;return(0,f.default)({},e,{envname:r})},saveOperateInfo:function(e,t){var r=t.payload;return(0,f.default)({},e,{operateInfo:(0,f.default)({},e.operateInfo,{id:r.id},{projectInfo:r.project_info},{personInfo:r.person_info},{releaseProgress:(0,f.default)({list:r.release_progress.msgdata},{pagination:{current:r.release_progress.current_page,total:r.release_progress.total,pageSize:r.release_progress.page_size}})})})},changeLoading:function(e,t){return(0,f.default)({},e,{operateInfo:(0,f.default)({},e.operateInfo,{releaseProgress:(0,f.default)({},e.operateInfo.releaseProgress,{isLoading:t.payload})})})}}},e.exports=t.default}});